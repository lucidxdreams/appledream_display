/* ── SmokeShelf.css — "The Smoke Shelf" (Pre-rolls) ───────────────────── */

.smoke-scene {
    position: relative;
    overflow: hidden;
    background: linear-gradient(180deg, #120a02 0%, #1e1408 50%, #0a0600 100%);
}

/* Warm amber radial light source */
.smoke-ambient {
    position: absolute;
    inset: 0;
    background:
        radial-gradient(ellipse 70% 50% at 50% 100%, rgba(184, 148, 62, 0.08) 0%, transparent 70%),
        radial-gradient(ellipse 50% 30% at 50% 60%, rgba(184, 148, 62, 0.04) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
    animation: smoke-ambient-pulse 6s ease-in-out infinite;
}

@keyframes smoke-ambient-pulse {

    0%,
    100% {
        opacity: 0.7;
    }

    50% {
        opacity: 1;
    }
}

/* CSS 3D perspective root  */
.smoke-perspective-root {
    position: absolute;
    inset: 0;
    perspective: 1200px;
    perspective-origin: 50% 30%;
    overflow: hidden;
}

/* Horizontal panning wrapper (GSAP controls x) */
.smoke-shelf-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding-bottom: 4%;
    will-change: transform;
}

/* Shared shelf styles */
.smoke-shelf {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-bottom: 20px;
}

/* Near shelf — lower on screen, larger */
.smoke-shelf--near {
    transform: rotateX(6deg) translateZ(0px);
    transform-origin: center bottom;
    margin-bottom: 10px;
}

/* Far shelf — upper on screen, slightly smaller via perspective */
.smoke-shelf--far {
    transform: rotateX(10deg) translateZ(-80px) translateY(-5%);
    transform-origin: center bottom;
    opacity: 0.85;
}

/* Wooden plank */
.smoke-shelf__plank {
    width: 100%;
    height: 12px;
    border-radius: 3px;
    background: linear-gradient(to bottom,
            #4d3018 0%,
            #35200e 40%,
            #221408 100%);
    box-shadow:
        0 3px 16px rgba(0, 0, 0, 0.7),
        0 1px 0 rgba(184, 148, 62, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.04);
    margin-top: 6px;
}

/* Products row on shelf */
.smoke-shelf__products {
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    gap: 24px;
    padding: 12px 32px 0;
}

/* Center products when they all fit within viewport */
.smoke-shelf__products--centered {
    justify-content: center;
    width: 100%;
}

/* Individual product slot */
.smoke-slot {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    transform: rotate(-2deg);
    animation: smoke-slot-sway calc(5s + var(--slot-i, 0) * 0.4s) ease-in-out infinite;
    animation-delay: calc(var(--slot-i, 0) * 0.25s);
}

@keyframes smoke-slot-sway {

    0%,
    100% {
        transform: rotate(-2deg) translateY(0);
    }

    50% {
        transform: rotate(-1.5deg) translateY(-3px);
    }
}

/* ── Smoke wisp particles ───── */
.smoke-wisp {
    position: absolute;
    bottom: calc(100% + 4px);
    left: 50%;
    translate: calc(-50% + var(--x-drift, 0px)) 0;
    width: 10px;
    height: 35px;
    border-radius: 50%;
    background: radial-gradient(ellipse at center,
            rgba(184, 148, 62, 0.15) 0%,
            rgba(184, 148, 62, 0.04) 50%,
            transparent 100%);
    animation: smoke-rise calc(3s + var(--delay, 0s)) ease-out infinite;
    animation-delay: var(--delay, 0s);
    pointer-events: none;
    filter: blur(4px);
}

@keyframes smoke-rise {
    0% {
        opacity: 0;
        transform: translateY(0) scaleX(1);
    }

    20% {
        opacity: 0.5;
        transform: translateY(-12px) scaleX(1.2);
    }

    60% {
        opacity: 0.3;
        transform: translateY(-40px) scaleX(1.6);
    }

    100% {
        opacity: 0;
        transform: translateY(-70px) scaleX(2);
    }
}

/* ── Global atmosphere wisps ─────────────────────────────────────────── */
.smoke-atmosphere {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

.smoke-atm-wisp {
    position: absolute;
    bottom: 0;
    left: calc(var(--i, 0) * 14% + 5%);
    width: calc(16px + var(--i, 0) * 3px);
    height: calc(60px + var(--i, 0) * 24px);
    background: radial-gradient(ellipse at bottom,
            rgba(184, 148, 62, 0.08) 0%,
            transparent 70%);
    border-radius: 50%;
    filter: blur(8px);
    animation: atm-drift calc(7s + var(--i, 0) * 1.2s) ease-in-out infinite;
    animation-delay: calc(var(--i, 0) * 0.8s);
}

@keyframes atm-drift {
    0% {
        transform: translateY(0) scaleX(1);
        opacity: 0;
    }

    10% {
        opacity: 0.7;
    }

    100% {
        transform: translateY(-100px) scaleX(2);
        opacity: 0;
    }
}